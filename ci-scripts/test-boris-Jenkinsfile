#!/bin/groovy

pipeline {
    agent {
        label 'caracal'
    }
    options {
        disableConcurrentBuilds()
	timestamps()
        ansiColor('xterm')
    }
    stages {
        stage ('Retrieve latest from branch') {
            steps {
                script {
                    checkout([$class: 'GitSCM', branches: [[name: '*/gNB-nrUE-USRP']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[url: 'https://gitlab.eurecom.fr/oai/openairinterface5g.git']]])
                    sh "git clean -x -d -ff"
                    sh "git log -n1"
                }
            }
        }
        stage ("Build") {
            steps {
                echo "Building on ${GIT_URL}"
                echo "  Branch -- ${GIT_BRANCH}"
                echo "  Branch -- ${GIT_COMMIT}"
                sh "git log -n1"
            }
        }
    }
}

